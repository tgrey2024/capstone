{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %}{% if action == 'create' %}Create{% else %}Edit{% endif %} Post Form{% endblock %}

{% block content %}
<div class="container move-up">
    <h3>
        {% if action == 'create' %}
            Create Post Content
        {% else %}
            Edit Post Content
        {% endif %} <i class="fa-regular fa-pen-to-square"></i>
    </h3>
    <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <!-- Render the form fields with crispy -->
    {{ form|crispy }}
    <!-- Current image preview -->
    {% if action == 'edit' and form.instance.image %}
    <div class="mb-3 current-image">
        <img src="{{ form.instance.image.url }}" alt="Thumbnail preview of Post Image" style="max-width: 200px;">
        <p>{{ form.instance.image.name }}</p>
    </div>
    {% endif %}
    <input class="btn btn-info" type="submit" value="{% if action == 'create' %}Add{% else %}Update{% endif %}" aria-label="Update Post Button">
</form>
</div>
{% endblock content %}